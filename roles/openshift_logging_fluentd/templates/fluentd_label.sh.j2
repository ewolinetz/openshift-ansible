#!/bin/bash

{{ openshift_client_binary }} --config=/etc/origin/master/admin.kubeconfig \
  label --overwrite node $1 \
  {% for k, v in __fluentd.nodeselector.items() %} {{ k }}={{ v }} {% endfor %}

# We sleep here because scheduler will get overwhelmed if we label all nodes at once.
sleep {{ __fluentd.label_delay }}
